"""
æ ¸å¿ƒ 6 ç±»ã€Œè¯¦ç»†åˆ†æ Promptã€æ¨¡æ¿ï¼Œä¾› LLM åšåŸºæœ¬é¢/æŠ¤åŸæ²³/åŒè¡Œ/ç©ºå¤´/å™äº‹/å‡è®¾æ‹†è§£ã€‚
æ‰€æœ‰å ä½ç¬¦ç”±è°ƒç”¨æ–¹å¡«å…¥ï¼šticker, financials, company_info, peers, hypothesis ç­‰ã€‚
"""

# â‘  åŸºæœ¬é¢æ·±åº¦åˆ†æï¼ˆä¸»åŠ›ï¼‰
PROMPT_FUNDAMENTAL_DEEP = """ä½ æ˜¯ä¸€ååä¿å®ˆçš„é•¿æœŸç¾è‚¡åŸºæœ¬é¢åˆ†æå¸ˆã€‚
ä½ çš„ä»»åŠ¡ä¸æ˜¯ç»™å‡ºä¹°å–å»ºè®®ï¼Œè€Œæ˜¯å¸®åŠ©æŠ•èµ„è€…ç†è§£å…¬å¸çœŸå®çŠ¶å†µã€‚

è¯·åŸºäºä»¥ä¸‹ä¿¡æ¯åˆ†æå…¬å¸ï¼š
- å…¬å¸åç§° / è‚¡ç¥¨ä»£ç ï¼š{ticker}
- è´¢åŠ¡æ•°æ®ï¼š{financials}
- å…¬å¸ä¿¡æ¯ï¼š{company_info}

è¯·ä¸¥æ ¼æŒ‰ä»¥ä¸‹ç»“æ„è¾“å‡ºï¼š

ã€1. æ”¶å…¥ä¸å¢é•¿è´¨é‡ã€‘
- å¢é•¿æ¥è‡ªå“ªé‡Œï¼ˆä»·æ ¼ / é‡ / æ–°ä¸šåŠ¡ / å¹¶è´­ï¼‰ï¼Ÿ
- æ˜¯å¦ä¾èµ–å•ä¸€å› ç´ ï¼Ÿ
- æ˜¯å¦å­˜åœ¨è¾¹é™…æ”¾ç¼“è¿¹è±¡ï¼Ÿ

ã€2. ç›ˆåˆ©èƒ½åŠ›ã€‘
- æ¯›åˆ©ç‡ / å‡€åˆ©ç‡å˜åŒ–è¶‹åŠ¿
- æ˜¯å¦å­˜åœ¨ä¸€æ¬¡æ€§é¡¹ç›®ç¾åŒ–åˆ©æ¶¦ï¼Ÿ

ã€3. ç°é‡‘æµä¸èµ„äº§è´Ÿå€ºã€‘
- ç°é‡‘æµæ˜¯å¦æ”¯æŒå½“å‰å¢é•¿ï¼Ÿ
- èµ„æœ¬å¼€æ”¯æ˜¯å¦å¯æŒç»­ï¼Ÿ

ã€4. å•†ä¸šæ¨¡å¼å¥åº·åº¦ã€‘
- å®¢æˆ·ç²˜æ€§å¦‚ä½•ï¼Ÿ
- æ˜¯å¦å®¹æ˜“è¢«æ›¿ä»£ï¼Ÿ

ã€5. ä¸­é•¿æœŸé£é™©ï¼ˆæœ€å¤š 5 æ¡ï¼‰ã€‘
- åªåˆ—å‡ºâ€œçœŸå®å¯å‘ç”Ÿâ€çš„é£é™©

ğŸ“Œ è¿™æ˜¯æ ‡å‡†æ¨¡æ¿ï¼Œæ‰€æœ‰å…¬å¸éƒ½èƒ½æ¨ªå‘å¯¹æ¯”ã€‚"""


# â‘¡ æŠ¤åŸæ²³ & ç«äº‰ä¼˜åŠ¿åˆ†æ
PROMPT_MOAT = """ä½ æ˜¯ä¸€åç ”ç©¶ä¼ä¸šæŠ¤åŸæ²³çš„æŠ•èµ„åˆ†æå¸ˆã€‚

è¯·åˆ†æ {ticker} æ˜¯å¦å…·å¤‡å¯æŒç»­ç«äº‰ä¼˜åŠ¿ï¼Œå¹¶æŒ‰ä»¥ä¸‹ç»´åº¦é€ä¸€åˆ¤æ–­ï¼š

1. æŠ€æœ¯æˆ–äº§å“å£å’
2. åˆ‡æ¢æˆæœ¬
3. ç½‘ç»œæ•ˆåº”
4. è§„æ¨¡æ•ˆåº”
5. å“ç‰Œ / ç›‘ç®¡å£å’

è¦æ±‚ï¼š
- æ¯ä¸€é¡¹æ˜ç¡®åˆ¤æ–­ã€Œå¼º / ä¸­ / å¼± / æ— ã€
- è¯´æ˜è¯¥ä¼˜åŠ¿è¢«å‰Šå¼±çš„å…·ä½“è·¯å¾„
- é¿å…ç©ºæ³›æè¿°

å…¬å¸/è¡Œä¸šèƒŒæ™¯ï¼ˆä¾›å‚è€ƒï¼‰ï¼š
{company_info}

è´¢åŠ¡ä¸ä¸šåŠ¡æ‘˜è¦ï¼š
{financials}"""


# â‘¢ åŒè¡Œä¸šæ¨ªå‘å¯¹æ¯”
PROMPT_PEERS = """ä½ æ˜¯ä¸€åå–æ–¹åˆ†æå¸ˆï¼Œéœ€è¦åšåŒè¡Œå¯¹æ¯”ã€‚

ç›®æ ‡å…¬å¸ï¼š{ticker}
åŒè¡Œå…¬å¸åˆ—è¡¨ï¼š{peers}

è¯·è¾“å‡ºå¯¹æ¯”åˆ†æï¼Œé‡ç‚¹å…³æ³¨ï¼š
- å¢é€Ÿå·®å¼‚
- ç›ˆåˆ©èƒ½åŠ›å·®å¼‚
- å•†ä¸šæ¨¡å¼å·®å¼‚
- å¸‚åœºé¢„æœŸå·®å¼‚ï¼ˆå¦‚ä¼°å€¼ï¼‰

å¹¶å›ç­”ï¼š
- ç›®æ ‡å…¬å¸å½“å‰è¢«â€œé«˜ä¼° / åˆç† / ä½ä¼°â€çš„æ ¸å¿ƒåŸå› æ˜¯ä»€ä¹ˆï¼Ÿ
- å¸‚åœºæœ€å¯èƒ½çœ‹é”™äº†å“ªä¸€ç‚¹ï¼Ÿ

ç›®æ ‡å…¬å¸å…³é”®ä¿¡æ¯ï¼ˆä¾›å‚è€ƒï¼‰ï¼š
{company_info}

è´¢åŠ¡æ‘˜è¦ï¼š
{financials}"""


# â‘£ ç©ºå¤´ / Devil's Advocate
PROMPT_SHORT = """ä½ ç°åœ¨æ˜¯ä¸€åç©ºå¤´ç ”ç©¶å‘˜ï¼Œç›®æ ‡æ˜¯æ‰¾å‡º {ticker} çš„æ½œåœ¨é—®é¢˜ã€‚

è¯·ä»ä»¥ä¸‹è§’åº¦åˆ†æï¼š
1. å¢é•¿æ˜¯å¦ä¸å¯æŒç»­ï¼Ÿ
2. æ˜¯å¦å­˜åœ¨è¢«æ›¿ä»£çš„æŠ€æœ¯ / å•†ä¸šæ¨¡å¼ï¼Ÿ
3. æ˜¯å¦è¿‡åº¦ä¾èµ–æŸä¸ªå®¢æˆ· / å¸‚åœºï¼Ÿ
4. ä¼°å€¼åœ¨å†å²æˆ–åŒè¡Œä¸­æ˜¯å¦åé«˜ï¼Ÿ
5. å“ªäº›äº‹ä»¶å¯èƒ½æˆä¸ºè‚¡ä»·ä¸‹è·Œçš„è§¦å‘ç‚¹ï¼Ÿ

è¦æ±‚ï¼š
- ä¸è¦é‡å¤å¤šå¤´è§‚ç‚¹
- åªåˆ—å‡ºæœ‰é€»è¾‘é“¾æ¡çš„é£é™©

å…¬å¸/è´¢åŠ¡ä¿¡æ¯ï¼ˆä¾›å‚è€ƒï¼‰ï¼š
{company_info}

{financials}"""


# â‘¤ è´¢æŠ¥ & ç®¡ç†å±‚â€œè¯æœ¯å˜åŒ–â€åˆ†æ
PROMPT_NARRATIVE = """è¯·åˆ†æ {ticker} çš„è´¢æŠ¥ä¸è¿‘æœŸæŠ«éœ²ä¿¡æ¯ã€‚

ä»¥ä¸‹ä¸ºè¿‘æœŸè´¢åŠ¡æ•°æ®ä¸æ–°é—»/äº‹ä»¶æ‘˜è¦ï¼Œè¯·æ®æ­¤æ¨æ–­ç®¡ç†å±‚å™äº‹æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼š
- æ˜¯å¦ä»â€œå¢é•¿â€è½¬å‘â€œæ•ˆç‡ / æˆæœ¬ / é˜²å¾¡â€ï¼Ÿ
- æ˜¯å¦å›é¿å…³é”®é—®é¢˜ï¼Ÿ

ã€è¿‘æœŸè´¢åŠ¡/äº‹ä»¶æ‘˜è¦ã€‘
{quarterly_summary}

ã€è¿‘æœŸæ–°é—»æˆ–äº‹ä»¶ã€‘
{news_summary}

è¯·è¾“å‡ºï¼š
1. å™äº‹å˜åŒ–æ‘˜è¦
2. æ­£é¢ä¿¡å·
3. éœ€è¦è­¦æƒ•çš„ä¿¡å·"""


# â‘¥ æŠ•èµ„å‡è®¾æ‹†è§£
PROMPT_THESIS = """è¯·ååŠ©æˆ‘æ‹†è§£ä»¥ä¸‹æŠ•èµ„å‡è®¾ï¼š

ã€æ ‡çš„ã€‘{ticker}

ã€æŠ•èµ„å‡è®¾ã€‘
{hypothesis}

è¯·å›ç­”ï¼š
1. è¿™ä¸ªå‡è®¾ä¾èµ–å“ªäº›å…³é”®å‰æï¼Ÿ
2. å“ªäº›å‰ææœ€å®¹æ˜“è¢«è¯ä¼ªï¼Ÿ
3. å¦‚æœå‡è®¾å¤±è´¥ï¼Œæœ€å¯èƒ½çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ

å…¬å¸/ä¸šåŠ¡èƒŒæ™¯ï¼ˆä¾›å‚è€ƒï¼‰ï¼š
{company_info}"""


def build_fundamental_deep(ticker: str, financials: str, company_info: str) -> str:
    return PROMPT_FUNDAMENTAL_DEEP.format(
        ticker=ticker,
        financials=financials or "ï¼ˆæ— æ•°æ®ï¼‰",
        company_info=company_info or "ï¼ˆæ— æ•°æ®ï¼‰",
    )


def build_moat(ticker: str, company_info: str, financials: str) -> str:
    return PROMPT_MOAT.format(
        ticker=ticker,
        company_info=company_info or "ï¼ˆæ— æ•°æ®ï¼‰",
        financials=financials or "ï¼ˆæ— æ•°æ®ï¼‰",
    )


def build_peers(ticker: str, peers: str, company_info: str, financials: str) -> str:
    return PROMPT_PEERS.format(
        ticker=ticker,
        peers=peers or "ï¼ˆæœªæä¾›åŒè¡Œåˆ—è¡¨ï¼Œè¯·åŸºäºè¡Œä¸šå¸¸è¯†åˆ†æï¼‰",
        company_info=company_info or "ï¼ˆæ— æ•°æ®ï¼‰",
        financials=financials or "ï¼ˆæ— æ•°æ®ï¼‰",
    )


def build_short(ticker: str, company_info: str, financials: str) -> str:
    return PROMPT_SHORT.format(
        ticker=ticker,
        company_info=company_info or "ï¼ˆæ— æ•°æ®ï¼‰",
        financials=financials or "ï¼ˆæ— æ•°æ®ï¼‰",
    )


def build_narrative(ticker: str, quarterly_summary: str, news_summary: str) -> str:
    return PROMPT_NARRATIVE.format(
        ticker=ticker,
        quarterly_summary=quarterly_summary or "ï¼ˆæ— è¿‘æœŸå­£åº¦æ•°æ®ï¼‰",
        news_summary=news_summary or "ï¼ˆæ— è¿‘æœŸæ–°é—»ï¼‰",
    )


def build_thesis(ticker: str, hypothesis: str, company_info: str) -> str:
    return PROMPT_THESIS.format(
        ticker=ticker,
        hypothesis=hypothesis or "ï¼ˆæœªæä¾›å‡è®¾ï¼‰",
        company_info=company_info or "ï¼ˆæ— æ•°æ®ï¼‰",
    )
